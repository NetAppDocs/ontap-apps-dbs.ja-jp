---
sidebar: sidebar 
permalink: epic/epic-ontap-cloning.html 
keywords: epic,cache,iris 
summary: Epicのデータ保護 
---
= Epicクローニング
:allow-uri-read: 


[role="lead"]
Epicは、ストレージノードベースのNetApp Snapshotテクノロジが、従来のファイルベースのバックアップと比較して本番ワークロードのパフォーマンスに影響しないことを認識しています。Snapshotバックアップを本番環境のデータベースのリカバリソースとして使用する場合は、データベースの整合性を考慮してバックアップ方式を実装する必要があります。

Snapshotは、ボリュームのポイントインタイムの読み取り専用バックアップコピーです。NetApp FlexClone®はSnapshotを作成し、瞬時に読み取りと書き込みを実行します。FlexCloneボリュームは、読み取り専用のアプリケーションと整合性のあるSnapshotを作成し、本番環境のデータから書き込み可能なFlexCloneボリュームを作成することで、優れた価値を提供します。この標準機能は、ストレージの削減、運用時間、自動化機能に大きく影響します。

更新プロセスにはFlexCloneボリュームが使用されます。



== データ管理

このソリューションの一部として、NetAppはネイティブのONTAPツールを使用して、バックアップとテストの更新を完全に自動化します。このソリューションは、Epicデータベース管理者（DBA）の大規模なコミュニティ向けに、Epicデータ管理を簡易化するように設計されています。

* Epic Mirrorは、ディザスタリカバリとレポート（緑で表示）にデータをレプリケートするために使用されます。
* ReportからClarityへの日次データダンプ。
* NetAppの自動バックアップ（黄色で表示）
* SUP、REP、およびその他（青で示されている）のNetApp自動テスト更新。
* テスト環境はフルコピー環境を対象としており、小規模なスカッシュコピーではありません。


詳細については、Epicアプリケーション向けNetAppサービスにお問い合わせください。

ストレージが複数のボリュームに分散され、ワークロードに適した数のLUNが1つ以上あるアプリケーションでは、コンテンツを一緒にバックアップして一貫したデータ保護を実現するには、CGが必要です。

整合グループ（CG）には、このような機能があります。ポリシーを使用して、オンデマンドまたはスケジュールされた整合性のあるSnapshotを毎晩作成できます。これを使用して、データをリストア、クローニング、レプリケートすることもできます。

CGの詳細については、を参照してください。link:https://docs.netapp.com/us-en/ontap/consistency-groups/["整合グループに関するNetAppのドキュメント"^]



== Epicの整合グループの設定

このドキュメントの前のセクションで説明したようにボリュームとLUNをプロビジョニングしたら、一連のCGに構成できます。推奨されるベストプラクティスは、次の図のようにセットアップすることです。

image:epic-cg-layout.png["Epicと整合グループ"]



== 整合性グループのSnapshot

夜間CG Snapshotスケジュールは、本番環境のデータベースのストレージを提供するボリュームに関連付けられた各子CGに設定する必要があります。その結果、これらのCGの整合性のあるバックアップが毎晩作成されます。作成したクローンを本番環境以外の環境（開発やテストなど）で使用するために、本番環境のデータベースをクローニングするために使用できます。NetAppは、Epic向けに独自のCGベースの自動化されたAnsibleワークフローを開発し、本番環境のデータベース、更新環境、テスト環境のバックアップを自動化しました。

CGスナップショットを使用して、Epicの本番環境データベースのリストア処理をサポートできます。

SANボリュームの場合は、CGに使用される各ボリュームでデフォルトのSnapshotポリシーを無効にします。これらのSnapshotは、通常、使用しているバックアップアプリケーションまたはNetAppのEpic Ansible自動化サービスによって管理されます。

SANボリュームの場合は、各ボリュームでデフォルトのSnapshotポリシーを無効にします。これらのSnapshotは、通常、バックアップアプリケーションまたはEpic Ansibleの自動化によって管理されます。[NS2]

WebBLOBおよびVMareデータセットは、CGには関連付けず、単なるボリュームとして設定する必要があります。SnapMirrorまたはSnapVaultテクノロジを使用すると、本番環境とは別のストレージシステムにSnapshotコピーを保持できます。

設定が完了すると、次のようになります。

image:epic-cg-snapshots.png["Epic CGスナップショット"]

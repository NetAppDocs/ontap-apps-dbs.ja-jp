= 
:allow-uri-read: 


メディエーターは実際にはTiebreakerではありませんが、それは事実上それが提供する機能です。処理は行われず、代わりにクラスタ間の通信用の代替通信チャネルを提供します。

image:smas-mediator.png["メディエーターを使用したSnapMirrorのアクティブな同期の図"]

自動フェイルオーバーの最大の課題はスプリットブレインの問題であり、この問題は2つのサイト間の接続が失われた場合に発生します。何が起こるべきでしょうか? 2つの異なるサイトがデータのサバイバーコピーとして自分自身を指定する必要はありませんが、1つのサイトでは、反対側のサイトが実際に失われたことと、反対側のサイトと通信できないことを区別するにはどうすればよいでしょうか。

ここでメディエーターが写真に入ります3番目のサイトに配置され、各サイトからそのサイトへの個別のネットワーク接続がある場合は、他のサイトの正常性を検証するための追加のパスが各サイトに用意されています。上の図をもう一度見て、次のシナリオを検討してください。

* 一方または両方のサイトからメディエーターに障害が発生した場合、またはメディエーターに到達できない場合はどうなりますか？
+
** 2つのクラスタは、レプリケーションサービスに使用されるのと同じリンクを介して相互に通信できます。
** データは引き続きRPO=0の保護で提供される


* サイトAに障害が発生した場合の動作
+
** サイトBは、両方の通信チャネルがダウンしたことを確認します。
** サイトBがデータサービスをテイクオーバーするが、RPO=0ミラーリングなし


* サイトBで障害が発生した場合の動作
+
** サイトAでは、両方の通信チャネルがダウンしていることが確認されます。
** サイトAがデータサービスをテイクオーバーするが、RPO=0ミラーリングなし




もう1つ考慮すべきシナリオがあります。データレプリケーションリンクの停止です。サイト間のレプリケーションリンクが失われた場合、RPO=0のミラーリングは明らかに不可能です。ではどうすればいいのでしょうか。

これは、優先サイトのステータスによって制御されます。SM-AS関係では、一方のサイトがもう一方のサイトのセカンダリになります。これは通常の運用には影響せず、すべてのデータアクセスは対称的ですが、レプリケーションが中断された場合は、運用を再開するためにこの関係を解除する必要があります。その結果、優先サイトはミラーリングなしで処理を継続し、レプリケーション通信がリストアされるまでセカンダリサイトはIO処理を停止します。

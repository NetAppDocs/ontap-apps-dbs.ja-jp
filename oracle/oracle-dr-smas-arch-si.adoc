---
sidebar: sidebar 
permalink: oracle/oracle-dr-smas-arch-si.html 
keywords: oracle, active sync, mcc, MCC-IP 
summary: Oracle SnapMirrorアクティブ同期 
searchtitle: Oracleシングルインスタンス（SnapMirrorアクティブ同期あり） 
---
= Oracleシングルインスタンス
:allow-uri-read: 


[role="lead"]
以下に説明する例は、SnapMirrorアクティブ同期レプリケーションを使用してOracleシングルインスタンスデータベースを導入するための多数のオプションの一部を示しています。

image:smas-oracle-si-nonuniform.png["不統一アクセスを使用するOracle SI"]



== 事前設定されたOSを使用したフェイルオーバー

SnapMirror Active Syncはディザスタリカバリサイトにデータの同期コピーを作成しますが、そのデータを利用できるようにするには、オペレーティングシステムと関連するアプリケーションが必要です。基本的な自動化により、環境全体のフェイルオーバー時間を大幅に短縮できます。PacemakerなどのClusterware製品は、サイト間でクラスタを作成するためによく使用されます。多くの場合、フェイルオーバープロセスは単純なスクリプトで実行できます。

プライマリノードが失われると、クラスタウェア（またはスクリプト）によって代替サイトでデータベースがオンラインになります。1つは、データベースを構成するSANリソース用に事前設定されたスタンバイサーバを作成する方法です。プライマリサイトに障害が発生すると、クラスタウェアまたはスクリプト化された代替サイトが次のような一連の処理を実行します。

. プライマリサイトの障害を検出
. FCまたはiSCSI LUNの検出の実行
. ファイルシステムのマウント、ASMディスクグループのマウント
. データベースの起動


このアプローチの主な要件は、リモートサイトでOSを実行することです。Oracleバイナリを使用して事前に設定する必要があります。つまり、Oracleのパッチ適用などのタスクをプライマリサイトとスタンバイサイトで実行する必要があります。また、災害が発生した場合は、Oracleバイナリをリモートサイトにミラーリングしてマウントすることもできます。

実際のアクティベーション手順は簡単です。LUN検出などのコマンドでは、FCポートあたりのコマンド数が少なくて済みます。ファイルシステムのマウントはコマンドにすぎませ `mount`ん。データベースとASMの両方を、1つのコマンドでCLIから開始および停止できます。



== 仮想OSによるフェイルオーバー

データベース環境のフェイルオーバーを拡張して、オペレーティングシステム自体を含めることができます。理論的には、このフェイルオーバーはブートLUNで実行できますが、ほとんどの場合、仮想OSで実行されます。手順の手順は次のようになります。

. プライマリサイトの障害を検出
. データベースサーバ仮想マシンをホストするデータストアのマウント
. 仮想マシンの起動
. データベースを手動で起動するか、仮想マシンでデータベースが自動的に起動するように設定します。


たとえば、ESXクラスタが複数のサイトにまたがっているとします。災害が発生した場合は、スイッチオーバー後にディザスタリカバリサイトで仮想マシンをオンラインにすることができます。



== ストレージ障害からの保護

上の図はlink:oracle-dr-smas-nonuniform.html["不均一なアクセス"]、の使用方法を示しています。SANが複数のサイトにまたがっているわけではありません。これは設定が簡単で、現在のSAN機能では唯一の選択肢となる場合もありますが、プライマリストレージシステムに障害が発生すると、アプリケーションがフェイルオーバーされるまでデータベースが停止します。

耐障害性を高めるために、このソリューションをとともに導入することもできlink:oracle-dr-smas-uniform.html["均一なアクセス"]ます。これにより、アプリケーションは、反対側のサイトからアドバタイズされたパスを使用して動作を継続できます。

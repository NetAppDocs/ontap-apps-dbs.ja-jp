---
sidebar: sidebar 
permalink: oracle/oracle-asar2-config-efficiency.html 
keywords: oracle, efficiency, compression, compaction, deduplication, ASA r2 
summary: ASA r2 による Oracle データベースとストレージ効率 
searchtitle: ASA r2 を使用した Oracle データベースとONTAP の効率化機能 
---
= 効率性
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
ONTAP のスペース効率機能は、 ASA r2 システムに対して完全にサポートされ、最適化されています。ほとんどの場合、すべての効率化機能を有効にした状態でデフォルトのままにしておくことが最善のアプローチです。

ASA r2 システムはオールフラッシュSAN プラットフォームであるため、使用可能な容量を最大化し、コストを削減するには、圧縮、コンパクト化、重複排除などの効率化テクノロジが重要です。



== 圧縮

圧縮は、データ内のパターンをエンコードすることによってスペース要件を削減します。SSD ベースのASA r2 システムでは、フラッシュによってパフォーマンスのためのオーバープロビジョニングの必要性がなくなるため、圧縮によって大幅な節約が実現します。ONTAPアダプティブ圧縮はデフォルトで有効になっており、Oracle データベースを含むエンタープライズ ワークロードで徹底的にテストされており、レイテンシがマイクロ秒単位で測定される環境でも測定可能なパフォーマンスへの影響はありません。場合によっては、圧縮されたデータが占めるキャッシュスペースが少なくなるため、パフォーマンスが向上します。


NOTE: 温度に敏感なストレージ効率 (TSSE) は、 ASA r2 システムには適用されません。ASA r2 システムでは、圧縮はホット (頻繁にアクセスされる) データまたはコールド (あまりアクセスされない) データに基づいて行われません。データがコールドになるのを待たずに圧縮が開始されます。



== 適応圧縮

アダプティブ圧縮では、リレーショナル データベースで一般的に使用されるブロック サイズに一致する、デフォルトで 8 KB のブロック サイズが使用されます。ブロック サイズを大きくすると (16 KB または 32 KB)、トランザクション ログやバックアップなどのシーケンシャル データの効率が向上しますが、上書き時のオーバーヘッドを回避するために、アクティブなデータベースでは慎重に使用する必要があります。


NOTE: ログやバックアップなどの静止ファイルの場合、ブロック サイズを最大 32 KB まで増やすことができます。デフォルトを変更する前に、 NetApp のガイダンスを参照してください。


CAUTION: ストリーミング バックアップでは重複排除による 32 KB 圧縮を使用しないでください。重複排除の効率を維持するために 8KB 圧縮を使用します。



== 圧縮のアライメント

ランダム上書きの場合、圧縮アライメントが重要になります。正しい LUN タイプ、パーティション オフセット (8 KB の倍数)、およびデータベース ブロック サイズに合わせたファイルシステム ブロック サイズを確認します。バックアップやログなどの連続データでは、アライメントを考慮する必要はありません。



== データコンパクション

圧縮は、複数の圧縮ブロックが同じ物理ブロックを共有できるようにすることで、圧縮を補完します。たとえば、8KB のブロックが 1KB に圧縮される場合、圧縮によって残りのスペースが無駄にならないことが保証されます。この機能はインラインであり、パフォーマンスの低下を引き起こしません。



== 重複排除

重複排除はデータセット全体の重複ブロックを削除します。Oracle データベースでは通常、一意のブロック ヘッダーとトレーラーにより重複排除による節約は最小限に抑えられますが、 ONTAP重複排除では、ゼロ化されたブロックと繰り返しパターンからスペースを再利用することができます。



== 効率性とシンプロビジョニング

ASA r2 システムは、デフォルトでシン プロビジョニングを使用します。効率化機能はシンプロビジョニングを補完し、使用可能な容量を最大化します。


NOTE: ASA r2 ストレージ システムでは、ストレージ ユニットは常にシン プロビジョニングされます。シックプロビジョニングはサポートされていません。



== クイックアシストテクノロジー（QAT）

NetApp ASA r2 プラットフォームでは、Intel QuickAssist テクノロジー (QAT) により、QAT を使用しないソフトウェア ベースの Temperature-Sensitive Storage Efficiency (TSSE) とは大きく異なるハードウェア アクセラレーションによる効率性が実現されます。

*ハードウェア アクセラレーション付き QAT:*

* 圧縮および暗号化タスクを CPU コアからオフロードします。
* ホット データ (頻繁にアクセスされるデータ) とコールド データ (あまりアクセスされないデータ) の両方に対して即時のインライン効率を実現します。
* CPU オーバーヘッドを大幅に削減します。
* より高いスループットとより低いレイテンシを実現します。
* TLS や VPN 暗号化などのパフォーマンスが重視される操作のスケーラビリティが向上します。


*QATなしのTSSE:*

* 効率的な操作のために CPU 駆動のプロセスに依存します。
* 遅延後のコールド データにのみ効率を適用します。
* より多くの CPU リソースを消費します。
* QAT アクセラレーション システムと比較して、全体的なパフォーマンスが制限されます。


したがって、最新のASA r2 システムは、古い TSSE のみのプラットフォームよりも高速で、ハードウェア アクセラレーションによる効率とシステム使用率が向上します。



== ASA r2 の効率化のベストプラクティス

* NetAppの推奨事項*：



=== ASA r2のデフォルト

ASA r2 システムで実行されているONTAPで作成されたストレージ ユニットは、圧縮、コンパクション、重複排除などのすべてのインライン効率機能がデフォルトで有効になってシン プロビジョニングされます。Oracle データベースは一般に重複排除による大きなメリットを得られず、圧縮できないデータが含まれる場合もありますが、これらのデフォルト設定はほぼすべてのワークロードに適しています。ONTAP は、コスト削減につながるかどうかに関係なく、あらゆる種類のデータと I/O パターンを効率的に処理するように設計されています。デフォルトは、理由が完全に理解されており、逸脱することで明らかな利点がある場合にのみ変更する必要があります。



=== 一般的な推奨事項

* 暗号化されたデータまたはアプリで圧縮されたデータの圧縮を無効にする: ファイルがすでにアプリケーション レベルで圧縮されているか暗号化されている場合は、圧縮を無効にしてパフォーマンスを最適化し、他のストレージ ユニットでより効率的な操作を可能にします。
* 大きな圧縮ブロックと重複排除を組み合わせないでください。データベースのバックアップに 32 KB の圧縮と重複排除の両方を使用しないでください。ストリーミング バックアップの場合、重複排除の効率を維持するために 8 KB 圧縮を使用します。
* 効率節約の監視: ONTAPツール (System Manager、 Active IQ) を使用して実際のスペース節約を追跡し、必要に応じてポリシーを調整します。

